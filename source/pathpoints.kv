#:kivy 1.0.9
#:import webbrowser webbrowser

<GoBackButt@Button>
    text: "Gå tillbaka till huvudmenyn"
    height: 100
    size_hint_y: None
    halign: "center"
    valign: "bottom"
    on_release:
        app.root.current = "main"

WindowManager:
    PathPointsMain:
    AllDiagnosticSubjectsScreen:
    AllGrossingSubjectsScreen:
    FavoriteDiagnosticSubjectsScreen:
    FavoriteGrossingSubjectsScreen:
    SubjectScreen:
    HelpScreen:

<PathPointsMain>:
    name: "main"
    GridLayout:
        cols:1
        rows: 10

        # add vertical space between the buttons
        padding: 10
        spacing: 10

        Label:
            text: "DIAGNOSTIK / MIKROSKOPI"
            size_hint_y: 0.15
            font_size: 32
            halign: 'center'
            valign: 'top'
            text_size: self.size

        Button:
            text: "Alla ämnesområden"
            size_hint_y: 0.15
            on_release:
                app.root.current = "all_diagnostic_subjects"
                root.manager.transition.direction = "left"

        Button:
            text: "Favoriter - diagnostik"
            size_hint_y: 0.15
            on_press:
                on_press: root.refresh_favorite("favorite_diagnostic_subjects", "favorites/favorites-diagnostics.json", True)
            on_release:
                app.root.current = "favorite_diagnostic_subjects"
                root.manager.transition.direction = "left"

        Label:
            text: ""
            size_hint_y: 0.15
            font_size: 32
            halign: 'center'
            valign: 'top'
            text_size: self.size

        Label:
            text: "UTSKÄRNING / MAKR0SKOPI"
            size_hint_y: 0.15
            font_size: 32
            halign: 'center'
            valign: 'top'
            text_size: self.size

        Button:
            text: "Alla ämnesområden"
            size_hint_y: 0.15
            on_release:
                app.root.current = "all_grossing_subjects"
                root.manager.transition.direction = "left"

        Button:
            text: "Favoriter - utskärning"
            size_hint_y: 0.15
            on_press:
                on_press: root.refresh_favorite("favorite_grossing_subjects", "favorites/favorites-grossing.json", False)
            on_release:
                app.root.current = "favorite_grossing_subjects"
                root.manager.transition.direction = "left"

        Label:
            text: ""
            size_hint_y: 0.15
            font_size: 32
            halign: 'center'
            valign: 'top'
            text_size: self.size

        Button:
            text: "Exportera loggad data"
            size_hint_y: 0.15
            on_release:
                app.root.current = "help"
                root.manager.transition.direction = "left"

        Button:
            text: "Hjälp"
            size_hint_y: 0.1
            on_release:
                app.root.current = "help"
                root.manager.transition.direction = "left"

<HelpScreen>:
    name: "help"

    Label:
        markup: True
        text: '[color=#0070E0][u]L\u00E4nk till SVFPs riktlinjedokument[/u][/color]'
        on_touch_down: webbrowser.open('https://svfp.se/media/v1fjombe/riktlinjer-for-en-patologs-individuella-arbetsbelastning-december-2023.pdf')

    Label:
        text: "\n\nUnder 'Ämnesområden' är alla KVASTs områden listade.\nUnder varje område listas proverna, klicka på dem för att logga poäng.\n\nOm du ofta loggar samma typ av prov kan du lägga till det som en favorit för snabbare åtkomst."
        font_size: 24
        halign: 'center'
        valign: 'top'
        text_size: self.size

    Label:
        text: "Problem med appen eller förbättrings förslag?\nMaila eller skriv till mig på teams! //Ludvig"
        font_size: 24
        text_size: self.size
        halign: 'center'
        valign: 'bottom'

    GoBackButt:


<AllDiagnosticSubjectsScreen>:
    name: "all_diagnostic_subjects"
    GridLayout:
        id: all_subjects_grid

    GoBackButt:

<AllGrossingSubjectsScreen>:
    name: "all_grossing_subjects"
    GridLayout:
        id: all_subjects_grid

    GoBackButt:

<FavoriteGrossingSubjectsScreen>:
    name: "favorite_grossing_subjects"
    GridLayout:
        id: favorite_subjects_grid

    GoBackButt:

<FavoriteDiagnosticSubjectsScreen>:
    name: "favorite_diagnostic_subjects"
    GridLayout:
        id: favorite_subjects_grid

    GoBackButt:

<SubjectScreen>:
    name: "subject"
    GridLayout:
        id: subject_grid

    GoBackButt:

